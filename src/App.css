
/* ===== Design System ===== */
:root {
  --bg-gradient: linear-gradient(135deg,#eef2ff 0%,#e0e7ff 40%,#c7d2fe 100%);
  --surface:#ffffff;
  --surface-alt:#f5f7ff;
  --brand:#6366f1;
  --brand-accent:#4338ca;
  --danger:#b91c1c;
  --text:#1f2937;
  --text-soft:#4b5563;
  --radius-sm:6px;
  --radius:14px;
  --radius-lg:22px;
  --shadow-lg:0 10px 32px -4px #6366f130,0 4px 12px -2px #4338ca20;
  --shadow-sm:0 2px 6px #11182715;
  --focus-ring:0 0 0 3px #ffffff,0 0 0 6px var(--brand);
  --trans:160ms cubic-bezier(.4,0,.2,1);
}

* { box-sizing:border-box; }
html,body{height:100%;}
body {
  margin:0;
  font-family:'Segoe UI','Roboto','Inter',system-ui,sans-serif;
  -webkit-font-smoothing:antialiased;
  background:var(--bg-gradient);
  color:var(--text);
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:clamp(0.5rem,2vh,1.5rem) clamp(.5rem,2vw,1.5rem);
}

/* ===== App Shell ===== */
.app {
  width:100%;
  max-width:520px;
  background:linear-gradient(180deg,var(--surface) 0%, var(--surface) 60%, var(--surface-alt) 100%);
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow-lg);
  padding:2rem 2rem 2.25rem;
  display:flex;
  flex-direction:column;
  gap:1.4rem;
  position:relative;
  animation:fadeIn .5s ease;
}

@keyframes fadeIn { from { opacity:0; transform:translateY(8px);} to {opacity:1; transform:translateY(0);} }

.header {
  font-size:clamp(1.4rem,2.2vw,2rem);
  font-weight:700;
  letter-spacing:.5px;
  background:linear-gradient(90deg,var(--brand),var(--brand-accent));
  -webkit-background-clip:text;
  color:transparent;
  text-align:left;
  margin:0;
}

/* Top bar meta */
.topbar { display:flex; flex-direction:column; gap:.75rem; }
.meta-row { display:flex; justify-content:space-between; align-items:center; gap:.75rem; }
.status-group { display:flex; align-items:center; gap:.6rem; }
.counter { font-size:.75rem; font-weight:600; text-transform:uppercase; letter-spacing:.6px; background:var(--surface-alt); padding:.35rem .55rem; border-radius:999px; color:var(--brand-accent); }
.offline { font-size:.65rem; background:#fcd34d; color:#7c2d12; padding:.3rem .5rem; border-radius:6px; font-weight:600; letter-spacing:.5px; }
.theme-btn { font-size:.8rem; }

.user-bar {
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:.75rem;
  flex-wrap:wrap;
  font-size:.95rem;
  color:var(--text-soft);
}
.user-bar strong { color:var(--text); }

/* ===== Form (Login & Add) ===== */
.form {
  background:var(--surface-alt);
  padding:1.4rem 1.2rem 1.2rem;
  border-radius:var(--radius);
  box-shadow:var(--shadow-sm);
  display:flex;
  flex-direction:column;
  gap:.85rem;
}
.form label { font-weight:600; font-size:.85rem; text-transform:uppercase; letter-spacing:.5px; color:var(--text-soft); }

.input {
  width:100%;
  padding:.85rem 1rem;
  border:2px solid #c7d2fe;
  border-radius:var(--radius-sm);
  background:#fff;
  font-size:1rem;
  line-height:1.2;
  transition:var(--trans);
}
.input:focus {
  outline:none;
  border-color:var(--brand);
  box-shadow:var(--focus-ring);
}
.input::placeholder { color:#9ca3af; }

.button {
  --btn-bg:var(--brand);
  --btn-bg-hover:var(--brand-accent);
  background:var(--btn-bg);
  color:#fff;
  font-weight:600;
  border:none;
  padding:.85rem 1.1rem;
  border-radius:var(--radius-sm);
  font-size:.95rem;
  letter-spacing:.5px;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.45rem;
  position:relative;
  transition:var(--trans);
  min-height:44px; /* touch target */
}
.button:hover { background:var(--btn-bg-hover); }
.button:focus-visible { outline:none; box-shadow:var(--focus-ring); }
.button:active { transform:translateY(2px); }
.button.secondary { --btn-bg:#e5e7eb; --btn-bg-hover:#d1d5db; color:#111827; }

.error { color:var(--danger); font-size:.85rem; margin-top:.25rem; }

/* ===== List ===== */
.list { display:flex; flex-direction:column; gap:1rem; }

.row { display:flex; gap:.6rem; align-items:stretch; }
.row .input { flex:1 1 auto; }
.row .button { flex:0 0 auto; padding:0 .95rem; }
.add-row { background:var(--surface-alt); padding:.75rem .75rem; border:1px solid #e5e7eb; border-radius:var(--radius); position:sticky; top:0; z-index:10; backdrop-filter:blur(4px); box-shadow:0 1px 0 #e5e7eb; }
.add-row .input { background:#fff; }

.list ul { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:.55rem; }

.list li {
  background:var(--surface-alt);
  padding:.75rem .85rem;
  border-radius:var(--radius-sm);
  display:flex;
  align-items:center;
  justify-content:space-between;
  font-size:.95rem;
  gap:.75rem;
  position:relative;
  line-height:1.15;
  transition:var(--trans);
  border:1px solid #e2e8f0;
}
.list li:hover { border-color:var(--brand); }
.list li span { color:var(--brand); font-weight:600; font-size:.85rem; }

/* New additions */
.pill-user { background:rgba(99,102,241,.14); color:var(--brand); padding:.28rem .55rem; font-size:.56rem; font-weight:600; line-height:1; border-radius:999px; letter-spacing:.6px; text-transform:uppercase; }

.completed { opacity:.75; }
.completed .pill-user { background:rgba(99,102,241,.18); }

/* Structured label for item */
.item-main { display:flex; align-items:center; gap:.6rem; flex:1; cursor:pointer; }
.item-main input { margin:0; width:18px; height:18px; cursor:pointer; accent-color:var(--brand); }
.item-text { max-width:250px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

.item-actions { display:flex; gap:.35rem; }
.icon-btn {
  background:transparent;
  border:1px solid #e2e8f0;
  color:#6b7280;
  width:32px; height:32px;
  border-radius:8px;
  display:flex; align-items:center; justify-content:center;
  font-size:1.1rem;
  cursor:pointer;
  padding:0;
  transition:var(--trans);
}
.icon-btn:hover { background:#f1f5f9; border-color:#cbd5e1; color:#374151; }
.icon-btn:focus-visible { outline:none; box-shadow:var(--focus-ring); }
.icon-btn:active { transform:translateY(2px); }

/* Empty state */
.empty { text-align:center; padding:1.2rem 1rem 1rem; font-size:.9rem; color:var(--text-soft); background:var(--surface-alt); border:1px dashed #cbd5e1; border-radius:var(--radius); animation:fadeIn .4s ease; }

/* Group lists */
.group-list { margin-bottom:1rem; }
.completed-block { margin-top:.25rem; background:linear-gradient(180deg,var(--surface-alt),var(--surface)); padding:.75rem .9rem 1rem; border:1px solid #e5e7eb; border-radius:var(--radius); }
.completed-block > summary { cursor:pointer; list-style:none; font-weight:600; margin-bottom:.6rem; }
.completed-block > summary::-webkit-details-marker { display:none; }
.completed-block[open] > summary { color:var(--brand-accent); }
.button.small { min-height:36px; font-size:.75rem; padding:.55rem .9rem; }

/* Theme overrides */


/* Zebra / subtle gradient */
.list li:nth-child(odd) { background:#f1f5ff; }

/* Swipe hint on mobile (optional decorative) */
@media (pointer:coarse) { .list li { -webkit-tap-highlight-color:transparent; } }

/* ===== Layout: Mobile First ===== */
@media (max-width:640px) {
  body { align-items:stretch; padding:0; }
  .app { border-radius:0; box-shadow:none; min-height:100vh; padding:1.35rem 1rem 2.1rem; }
  .row { flex-direction:column; }
  .row .button { width:100%; padding:.85rem 1.2rem; }
  .user-bar { flex-direction:column; align-items:flex-start; }
  .item-text { max-width:60vw; }
}

/* ===== Dark Mode ===== */
@media (prefers-color-scheme: dark) {
  :root {
    --surface:#1e2230; --surface-alt:#272d40; --text:#f3f4f6; --text-soft:#c7ced9; --shadow-lg:0 10px 34px -6px #00000080,0 4px 10px -2px #00000070;
    --bg-gradient:linear-gradient(135deg,#0f172a,#1e293b 55%,#312e81);
  }
  .input { background:#1f2535; color:var(--text); border-color:#3f4b63; }
  .list li { background:#272d40; border-color:#323b52; }
  .list li:nth-child(odd) { background:#2c3448; }
  .button.secondary { --btn-bg:#374151; --btn-bg-hover:#4b5563; color:#f3f4f6; }
}
